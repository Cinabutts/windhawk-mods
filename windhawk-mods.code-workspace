{
	"folders": [
		{
			"path": "."
		}
	],
	"launch": {
		"version": "0.2.0",
		"configurations": [
			{
				"name": "Attach to Process (Pick)",
				"type": "lldb",
				"request": "attach",
				"pid": "${command:pickMyProcess}"
			},
			{
				"name": "Attach to Explorer",
				"type": "lldb",
				"request": "attach",
				"program": "C:\\Windows\\explorer.exe"
			}
		]
	},
	"tasks": {
		"version": "2.0.0",
		"tasks": [
            {
                "label": "Deploy Mod Source",
                "type": "process",
                "command": "pwsh",
                "args": [
                    "-NoProfile",
                    "-ExecutionPolicy",
                    "Bypass",
                    "-File",
                    "${workspaceFolder}/scripts/Invoke-AsAdmin.ps1",
                    "-Command",
                    "if ('${fileExtname}' -ne '.cpp' -or '${fileBasename}' -notlike '*.wh.cpp') { Write-Host 'Error: Not a .wh.cpp file' -ForegroundColor Red; exit 1 }; $modId = ('${fileBasenameNoExtension}' -replace '\\.wh$',''); $dest = ('C:/ProgramData/Windhawk/ModsSource/local@' + $modId + '.wh.cpp'); Copy-Item -Path '${file}' -Destination $dest -Force; Write-Host ('Deployed: ' + $dest) -ForegroundColor Green",
                    "-WorkingDirectory",
                    "${workspaceFolder}"
                ],
                "presentation": {
                    "reveal": "always",
                    "panel": "shared"
                },
                "problemMatcher": []
            },
            {
                "label": "Delete Local Mod",
                "type": "process",
                "command": "pwsh",
                "args": [
                    "-NoProfile",
                    "-ExecutionPolicy",
                    "Bypass",
                    "-File",
                    "${workspaceFolder}/scripts/Invoke-AsAdmin.ps1",
                    "-Command",
                    "if ('${fileExtname}' -ne '.cpp' -or '${fileBasename}' -notlike '*.wh.cpp') { Write-Host 'Error: Not a .wh.cpp file' -ForegroundColor Red; exit 1 }; $modId = ('${fileBasenameNoExtension}' -replace '\\.wh$',''); $localModId = ('local@' + $modId); $srcPath = ('C:/ProgramData/Windhawk/ModsSource/' + $localModId + '.wh.cpp'); $regPath = ('HKLM:\\SOFTWARE\\Windhawk\\Engine\\Mods\\' + $localModId); Write-Host ('Removing: ' + $localModId) -ForegroundColor Yellow; if (Test-Path $srcPath) { Remove-Item $srcPath -Force; Write-Host ('Deleted source: ' + $srcPath) -ForegroundColor Yellow } else { Write-Host ('Source not found: ' + $srcPath) -ForegroundColor Red }; if (Test-Path $regPath) { Remove-Item $regPath -Recurse -Force; Write-Host ('Deleted registry: ' + $regPath) -ForegroundColor Yellow } else { Write-Host ('Registry not found: ' + $regPath) -ForegroundColor Red }; Write-Host 'Done.' -ForegroundColor Yellow",
                    "-WorkingDirectory",
                    "${workspaceFolder}"
                ],
                "presentation": {
                    "reveal": "always",
                    "panel": "shared"
                },
                "problemMatcher": []
            },
            {
                "label": "Restart Windhawk UI",
                "type": "process",
                "command": "pwsh",
                "args": [
                    "-NoProfile",
                    "-ExecutionPolicy",
                    "Bypass",
                    "-File",
                    "${workspaceFolder}/scripts/Invoke-AsAdmin.ps1",
                    "-Command",
                    "$uiProcs = Get-Process -Name 'VSCodium' -ErrorAction SilentlyContinue | Where-Object { $_.Path -like '*Windhawk*' }; if ($uiProcs) { Write-Host 'Restarting Windhawk UI...' -ForegroundColor Yellow; $uiProcs | Stop-Process -Force; Start-Sleep -Seconds 1 } else { Write-Host 'Opening Windhawk UI...' -ForegroundColor Yellow }; Start-Process 'C:/Program Files/Windhawk/windhawk.exe' -ArgumentList '--settings'",
                    "-WorkingDirectory",
                    "${workspaceFolder}"
                ],
                "presentation": {
                    "reveal": "always",
                    "panel": "shared"
                },
                "problemMatcher": []
            },
            {
                "label": "Auto-Compile Mod (AHK)",
                "type": "process",
                "command": "pwsh",
                "args": [
                    "-NoProfile",
                    "-ExecutionPolicy",
                    "Bypass",
                    "-File",
                    "${workspaceFolder}/scripts/Invoke-AsAdmin.ps1",
                    "-Command",
                    "& \"${workspaceFolder}/scripts/Invoke-AutoCompileMod.ps1\" -FileName \"${fileBasename}\" -ModName \"${fileBasenameNoExtension}\"; Write-Host 'Running Auto-Compile AHK Script for convenience. ESC to exit!' -ForegroundColor Yellow",
                    "-WorkingDirectory",
                    "${workspaceFolder}"
                ],
                "presentation": {
                    "reveal": "always",
                    "panel": "shared"
                },
                "problemMatcher": []
            },
            {
                "label": "Deploy Mod to Windhawk",
                "dependsOn": [
                    "Deploy Mod Source",
                    "Restart Windhawk UI",
                    "Auto-Compile Mod (AHK)"
                ],
                "dependsOrder": "sequence",
                "presentation": {
                    "reveal": "always",
                    "panel": "shared"
                },
                "problemMatcher": []
            },
            {
                "label": "Remove Local Mod from Windhawk",
                "dependsOn": [
                    "Delete Local Mod",
                    "Restart Windhawk UI"
                ],
                "dependsOrder": "sequence",
                "presentation": {
                    "reveal": "always",
                    "panel": "shared"
                },
                "problemMatcher": []
            },
            {
                "label": "Test Auto-Compile AHK",
                "type": "process",
                "command": "pwsh",
                "args": [
                    "-NoProfile",
                    "-ExecutionPolicy",
                    "Bypass",
                    "-File",
                    "${workspaceFolder}/scripts/Invoke-AsAdmin.ps1",
                    "-Command",
                    "& \"${workspaceFolder}/scripts/Invoke-AutoCompileMod.ps1\" -FileName \"${fileBasename}\" -ModName \"${fileBasenameNoExtension}\"; Write-Host 'Test auto-compile completed.' -ForegroundColor Yellow",
                    "-WorkingDirectory",
                    "${workspaceFolder}"
                ],
                "presentation": {
                    "reveal": "always",
                    "panel": "shared"
                },
                "problemMatcher": []
            },
            {
                "label": "Submit Mod",
                "type": "process",
                "command": "pwsh",
                "args": [
                    "-NoProfile",
                    "-ExecutionPolicy",
                    "Bypass",
                    "-File",
                    "${workspaceFolder}/scripts/Invoke-AsAdmin.ps1",
                    "-Command",
                    "& \"${workspaceFolder}/scripts/Submit-Mod.ps1\" -FilePath \"${file}\" -FileName \"${fileBasename}\"; Write-Host 'Mod submitted successfully.' -ForegroundColor Yellow",
                    "-WorkingDirectory",
                    "${workspaceFolder}"
                ],
                "presentation": {
                    "reveal": "always",
                    "panel": "shared",
                    "focus": true
                },
                "problemMatcher": []
            }
        ]
	},
	"settings": {
		"mcp": {
			"inputs": [],
			"servers": {}
		},
		"files.exclude": {
			"**/.git": false,
			"**/.svn": false,
			"**/.hg": false,
			"**/.DS_Store": false,
			"**/Thumbs.db": false,
			".vscode/record/**/*": false,
			"**/desktop-icons-toggle.wh.cpp": false,
			"**/newfile.json": false,
			"newfile.json": false,
			".vscode/*.*": false
		},
		"outline.showModules": true,
		"outline.showNamespaces": true,
		"explorerExclude.backup": {},
		"chat.mcp.serverSampling": {
			"windhawk-mods.code-workspace: files": {
				"allowedModels": [
					"copilot/claude-sonnet-4.5",
					"copilot/auto",
					"copilot/claude-haiku-4.5",
					"copilot/claude-opus-4.5",
					"copilot/claude-sonnet-4",
					"copilot/gemini-2.5-pro",
					"copilot/gemini-3-flash-preview",
					"copilot/gemini-3-pro-preview",
					"openai/gpt-4.1",
					"copilot/gpt-4.1",
					"openai/gpt-4.1-mini",
					"copilot/gpt-4o",
					"openai/gpt-4o-2024-11-20",
					"openai/gpt-5",
					"copilot/gpt-5",
					"copilot/gpt-5-mini",
					"openai/gpt-5-mini",
					"copilot/gpt-5-codex",
					"copilot/gpt-5.1",
					"copilot/gpt-5.1-codex",
					"copilot/gpt-5.1-codex-max",
					"copilot/gpt-5.1-codex-mini",
					"copilot/gpt-5.2",
					"copilot/grok-code-fast-1",
					"copilot/oswe-vscode-prime"
				]
			}
        },
        "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd",
        "editor.mouseWheelZoom": true,
        "editor.defaultFoldingRangeProvider": "ms-vscode.cpptools"
	}
}