{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Deploy Mod Source",
            "type": "shell",
            "command": "$modId = ('${fileBasenameNoExtension}' -replace '\\.wh$',''); $dest = ('C:/ProgramData/Windhawk/ModsSource/local@' + $modId + '.wh.cpp'); Copy-Item -Path '${file}' -Destination $dest -Force; Write-Host ('Deployed to: ' + $dest)",
            "presentation": { "reveal": "always", "panel": "shared" },
            "problemMatcher": []
        },
        {
            "label": "Delete Local Mod",
            "type": "shell",
            "command": "$modId = ('${fileBasenameNoExtension}' -replace '\\.wh$',''); $localModId = ('local@' + $modId); $srcPath = ('C:/ProgramData/Windhawk/ModsSource/' + $localModId + '.wh.cpp'); $regPath = ('HKLM:\\SOFTWARE\\Windhawk\\Engine\\Mods\\' + $localModId); Write-Host ('Removing mod: ' + $localModId); if (Test-Path $srcPath) { Remove-Item $srcPath -Force; Write-Host ('Deleted source: ' + $srcPath) } else { Write-Host ('Source not found: ' + $srcPath) }; if (Test-Path $regPath) { Remove-Item $regPath -Recurse -Force; Write-Host ('Deleted registry: ' + $regPath) } else { Write-Host ('Registry key not found: ' + $regPath) }; Write-Host 'Done.'",
            "presentation": { "reveal": "always", "panel": "shared" },
            "problemMatcher": []
        },
        {
            "label": "Restart Windhawk UI",
            "type": "shell",
            "command": "$uiProcs = Get-Process -Name 'VSCodium' -ErrorAction SilentlyContinue | Where-Object { $_.Path -like '*Windhawk*' }; if ($uiProcs) { Write-Host 'Closing Windhawk UI...'; $uiProcs | Stop-Process -Force; Start-Sleep -Seconds 1 }; Write-Host 'Opening Windhawk UI...'; Start-Process 'C:/Program Files/Windhawk/windhawk.exe' -ArgumentList '--settings'",
            "presentation": { "reveal": "always", "panel": "shared" },
            "problemMatcher": []
        },
        {
            "label": "Deploy Mod to Windhawk",
            "dependsOn": ["Deploy Mod Source", "Restart Windhawk UI"],
            "dependsOrder": "sequence",
            "presentation": { "reveal": "always", "panel": "shared" },
            "problemMatcher": []
        },
        {
            "label": "Remove Local Mod from Windhawk",
            "dependsOn": ["Delete Local Mod", "Restart Windhawk UI"],
            "dependsOrder": "sequence",
            "presentation": { "reveal": "always", "panel": "shared" },
            "problemMatcher": []
        }
    ]
}